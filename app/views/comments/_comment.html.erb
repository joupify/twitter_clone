<%# depth permet de gérer l'indentation des réponses imbriquées %>
<div class="comment mb-3" style="margin-left: <%= depth * 20 %>px;">
  <div class="d-flex align-items-center mb-1">
    <strong class="me-2"><%= comment.user.username %></strong>
    <span><%= comment.content %></span>
  </div>

  <!-- Bouton Répondre -->
  <button class="btn btn-link btn-sm p-0 mb-2"
          onclick="document.getElementById('reply-form-<%= comment.id %>').style.display='block'; this.style.display='none'">
    Répondre
  </button>

  <!-- Formulaire de réponse (masqué par défaut) -->
  <div id="reply-form-<%= comment.id %>" style="display: none;" class="mb-3">
    <%= render 'comments/form', comment: comment.tweet.comments.build(parent_id: comment.id) %>
  </div>

  <!-- Affichage récursif des réponses -->
	<% if depth < 5 %>
		<% comment.replies.includes(:user).order(created_at: :asc).each do |reply| %>
			<%= render 'comments/comment', comment: reply, depth: depth + 1 %>
		<% end %>
	<% end %>

</div>